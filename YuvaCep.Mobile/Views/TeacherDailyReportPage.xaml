<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:YuvaCep.Mobile.ViewModels"
             xmlns:enums="clr-namespace:YuvaCep.Mobile.Enums"
             xmlns:converters="clr-namespace:YuvaCep.Mobile.Converters"
             x:Class="YuvaCep.Mobile.Views.TeacherDailyReportPage"
             Title="Rapor Ekle"
             Shell.NavBarIsVisible="False"
             BackgroundColor="#F5F5F5">

    <ContentPage.Resources>
        <ResourceDictionary>
            <converters:EnumToStringConverter x:Key="EnumConverter"/>
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid RowDefinitions="Auto, *">
        <Grid Grid.Row="0" BackgroundColor="#FF7043" Padding="15" ColumnDefinitions="Auto, *">
            <ImageButton Command="{Binding GoBackCommand}" HeightRequest="24" HorizontalOptions="Start">
                <ImageButton.Source>
                    <FontImageSource Glyph="&#x2190;" Color="White" Size="24" />
                </ImageButton.Source>
            </ImageButton>
            <Label Grid.Column="1" Text="Rapor OluÅŸtur" TextColor="White" FontSize="20" FontAttributes="Bold" 
                   HorizontalOptions="Center" VerticalOptions="Center" Margin="-24,0,0,0"/>
        </Grid>

        <ScrollView Grid.Row="1" Padding="20">
            <VerticalStackLayout Spacing="15">

                <Frame Padding="15" CornerRadius="10" BorderColor="#FF7043" BackgroundColor="White">
                    <VerticalStackLayout Spacing="5">
                        <Label Text="ðŸ‘¤ Ã–ÄŸrenci SeÃ§in" FontAttributes="Bold" TextColor="#FF7043"/>
                        <Picker Title="Listeden bir Ã¶ÄŸrenci seÃ§in..."
                                ItemsSource="{Binding Students}"
                                ItemDisplayBinding="{Binding Name}"
                                SelectedItem="{Binding SelectedStudent}"
                                TextColor="#333" TitleColor="Gray"/>
                    </VerticalStackLayout>
                </Frame>

                <VerticalStackLayout Spacing="15" IsVisible="{Binding SelectedStudent, Converter={StaticResource IsNotNullConverter}}">

                    <Frame Padding="15" CornerRadius="10">
                        <VerticalStackLayout Spacing="15">
                            <Label Text="ðŸ˜Š Genel Durum" FontAttributes="Bold" TextColor="#FF7043"/>

                            <HorizontalStackLayout Spacing="10" HorizontalOptions="Center">

                                <Frame CornerRadius="10" Padding="10" HasShadow="False" BorderColor="Transparent">
                                    <Frame.Triggers>
                                        <DataTrigger TargetType="Frame" Binding="{Binding SelectedMood}" Value="{x:Static enums:MoodStatus.Harika}">
                                            <Setter Property="BackgroundColor" Value="#FFCCBC"/>
                                            <Setter Property="BorderColor" Value="#FF7043"/>
                                        </DataTrigger>
                                    </Frame.Triggers>
                                    <Frame.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding SetMoodCommand}" CommandParameter="{x:Static enums:MoodStatus.Harika}"/>
                                    </Frame.GestureRecognizers>
                                    <VerticalStackLayout Spacing="5" HorizontalOptions="Center">
                                        <Label Text="ðŸ¤©" FontSize="32" HorizontalOptions="Center"/>
                                        <Label Text="Harika" FontSize="10" HorizontalOptions="Center"/>
                                    </VerticalStackLayout>
                                </Frame>

                                <Frame CornerRadius="10" Padding="10" HasShadow="False" BorderColor="Transparent">
                                    <Frame.Triggers>
                                        <DataTrigger TargetType="Frame" Binding="{Binding SelectedMood}" Value="{x:Static enums:MoodStatus.Mutlu}">
                                            <Setter Property="BackgroundColor" Value="#FFCCBC"/>
                                            <Setter Property="BorderColor" Value="#FF7043"/>
                                        </DataTrigger>
                                    </Frame.Triggers>
                                    <Frame.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding SetMoodCommand}" CommandParameter="{x:Static enums:MoodStatus.Mutlu}"/>
                                    </Frame.GestureRecognizers>
                                    <VerticalStackLayout Spacing="5" HorizontalOptions="Center">
                                        <Label Text="ðŸ™‚" FontSize="32" HorizontalOptions="Center"/>
                                        <Label Text="Mutlu" FontSize="10" HorizontalOptions="Center"/>
                                    </VerticalStackLayout>
                                </Frame>

                                <Frame CornerRadius="10" Padding="10" HasShadow="False" BorderColor="Transparent">
                                    <Frame.Triggers>
                                        <DataTrigger TargetType="Frame" Binding="{Binding SelectedMood}" Value="{x:Static enums:MoodStatus.Normal}">
                                            <Setter Property="BackgroundColor" Value="#FFCCBC"/>
                                            <Setter Property="BorderColor" Value="#FF7043"/>
                                        </DataTrigger>
                                    </Frame.Triggers>
                                    <Frame.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding SetMoodCommand}" CommandParameter="{x:Static enums:MoodStatus.Normal}"/>
                                    </Frame.GestureRecognizers>
                                    <VerticalStackLayout Spacing="5" HorizontalOptions="Center">
                                        <Label Text="ðŸ˜" FontSize="32" HorizontalOptions="Center"/>
                                        <Label Text="Normal" FontSize="10" HorizontalOptions="Center"/>
                                    </VerticalStackLayout>
                                </Frame>

                                <Frame CornerRadius="10" Padding="10" HasShadow="False" BorderColor="Transparent">
                                    <Frame.Triggers>
                                        <DataTrigger TargetType="Frame" Binding="{Binding SelectedMood}" Value="{x:Static enums:MoodStatus.Uzgun}">
                                            <Setter Property="BackgroundColor" Value="#FFCCBC"/>
                                            <Setter Property="BorderColor" Value="#FF7043"/>
                                        </DataTrigger>
                                    </Frame.Triggers>
                                    <Frame.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding SetMoodCommand}" CommandParameter="{x:Static enums:MoodStatus.Uzgun}"/>
                                    </Frame.GestureRecognizers>
                                    <VerticalStackLayout Spacing="5" HorizontalOptions="Center">
                                        <Label Text="â˜¹ï¸" FontSize="32" HorizontalOptions="Center"/>
                                        <Label Text="ÃœzgÃ¼n" FontSize="10" HorizontalOptions="Center"/>
                                    </VerticalStackLayout>
                                </Frame>

                                <Frame CornerRadius="10" Padding="10" HasShadow="False" BorderColor="Transparent">
                                    <Frame.Triggers>
                                        <DataTrigger TargetType="Frame" Binding="{Binding SelectedMood}" Value="{x:Static enums:MoodStatus.CokUzgun}">
                                            <Setter Property="BackgroundColor" Value="#FFCCBC"/>
                                            <Setter Property="BorderColor" Value="#FF7043"/>
                                        </DataTrigger>
                                    </Frame.Triggers>
                                    <Frame.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding SetMoodCommand}" CommandParameter="{x:Static enums:MoodStatus.CokUzgun}"/>
                                    </Frame.GestureRecognizers>
                                    <VerticalStackLayout Spacing="5" HorizontalOptions="Center">
                                        <Label Text="ðŸ¤’" FontSize="32" HorizontalOptions="Center"/>
                                        <Label Text="Halsiz" FontSize="10" HorizontalOptions="Center"/>
                                    </VerticalStackLayout>
                                </Frame>

                            </HorizontalStackLayout>

                            <Entry Placeholder="Mod notu ekle..." Text="{Binding MoodNote}"/>
                        </VerticalStackLayout>
                    </Frame>

                    <Frame Padding="15" CornerRadius="10">
                        <VerticalStackLayout Spacing="10">
                            <Label Text="ðŸ½ï¸ Yemek Durumu" FontAttributes="Bold" TextColor="#FF7043"/>
                            <Picker Title="KahvaltÄ±" ItemsSource="{Binding FoodList}" SelectedItem="{Binding SelectedBreakfast}"
                                    ItemDisplayBinding="{Binding ., Converter={StaticResource EnumConverter}}"/>
                            <Picker Title="Ã–ÄŸle YemeÄŸi" ItemsSource="{Binding FoodList}" SelectedItem="{Binding SelectedLunch}"
                                    ItemDisplayBinding="{Binding ., Converter={StaticResource EnumConverter}}"/>
                            <Entry Placeholder="Yemek notu..." Text="{Binding FoodNote}"/>
                        </VerticalStackLayout>
                    </Frame>

                    <Frame Padding="15" CornerRadius="10">
                        <VerticalStackLayout Spacing="10">
                            <Label Text="ðŸ˜´ Uyku &amp; Etkinlik" FontAttributes="Bold" TextColor="#FF7043"/>
                            <Picker Title="Uyku" ItemsSource="{Binding SleepList}" SelectedItem="{Binding SelectedSleep}"
                                    ItemDisplayBinding="{Binding ., Converter={StaticResource EnumConverter}}"/>
                            <Picker Title="Etkinlik" ItemsSource="{Binding ActivityList}" SelectedItem="{Binding SelectedActivity}"
                                    ItemDisplayBinding="{Binding ., Converter={StaticResource EnumConverter}}"/>
                            <Entry Placeholder="Etkinlik notu..." Text="{Binding ActivityNote}"/>
                        </VerticalStackLayout>
                    </Frame>

                    <Frame Padding="15" CornerRadius="10">
                        <VerticalStackLayout Spacing="10">
                            <Label Text="ðŸ“ Notunuz" FontAttributes="Bold" TextColor="#FF7043"/>
                            <Editor Placeholder="Veliye iletmek istediÄŸiniz not..." Text="{Binding TeacherNote}" HeightRequest="80"/>
                        </VerticalStackLayout>
                    </Frame>

                    <Button Text="RAPORU KAYDET" 
                            Command="{Binding SaveReportCommand}"
                            BackgroundColor="#FF7043" TextColor="White" FontAttributes="Bold" CornerRadius="25" HeightRequest="50" Margin="0,10,0,20"/>

                </VerticalStackLayout>

                <Label Text="LÃ¼tfen rapor girmek iÃ§in yukarÄ±dan bir Ã¶ÄŸrenci seÃ§iniz." 
                       TextColor="Gray" HorizontalOptions="Center" IsVisible="{Binding SelectedStudent, Converter={StaticResource IsNullConverter}}"/>

            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>