<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:YuvaCep.Mobile.ViewModels"
             x:Class="YuvaCep.Mobile.Views.LoginPage"
             BackgroundColor="{StaticResource PageBackgroundColor}"
             NavigationPage.HasNavigationBar="False">

    <ScrollView>
        <Grid RowDefinitions="Auto, *">

            <BoxView x:Name="HeaderBackground"
                     Grid.Row="0" 
                     Color="{StaticResource PrimaryColor}" 
                     HeightRequest="260" 
                     CornerRadius="0,0,60,60" 
                     VerticalOptions="Start"/>

            <Image x:Name="RoleImage"
                   Grid.Row="0" 
                   Source="img_school.png" 
                   HeightRequest="140" 
                   VerticalOptions="Center" 
                   Margin="0,-50,0,0"/>

            <VerticalStackLayout Grid.Row="0" Grid.RowSpan="2" Spacing="20" Padding="30, 170, 30, 30">

                <Frame BackgroundColor="White" 
                       CornerRadius="20"
                       Padding="25" 
                       HasShadow="True"
                       BorderColor="Transparent">

                    <VerticalStackLayout Spacing="15">
                        <Label Text="Hoş Geldiniz" 
                               FontSize="24" 
                               FontAttributes="Bold" 
                               TextColor="{StaticResource PrimaryTextColor}"
                               HorizontalOptions="Center"/>

                        <Label Text="Lütfen giriş yapınız" 
                               FontSize="14" 
                               TextColor="{StaticResource SecondaryTextColor}"
                               HorizontalOptions="Center"
                               Margin="0,0,0,10"/>

                        <Frame Style="{StaticResource EntryFrameStyle}">
                            <Entry Placeholder="TC Kimlik No" 
                                   Text="{Binding TcKimlikNo}"
                                   Keyboard="Numeric" 
                                   TextColor="{StaticResource PrimaryTextColor}"
                                   PlaceholderColor="{StaticResource PlaceholderColor}"/>
                        </Frame>

                        <Frame Style="{StaticResource EntryFrameStyle}">
                            <Entry Placeholder="Şifre" 
                                   IsPassword="True" 
                                   Text="{Binding Password}"
                                   TextColor="{StaticResource PrimaryTextColor}"
                                   PlaceholderColor="{StaticResource PlaceholderColor}"/>
                        </Frame>

                        <HorizontalStackLayout Spacing="8" VerticalOptions="Center">
                            <CheckBox IsChecked="{Binding IsRememberMeChecked}" 
                                      x:Name="RememberMeCheck"
                                      Color="{StaticResource PrimaryColor}"/>
                            <Label Text="Beni Hatırla" VerticalOptions="Center" FontSize="13" TextColor="{StaticResource SecondaryTextColor}"/>
                        </HorizontalStackLayout>

                        <Button x:Name="LoginBtn"
                                Text="GİRİŞ YAP" 
                                Command="{Binding LoginCommand}"
                                Style="{StaticResource PrimaryButtonStyle}" 
                                Margin="0,15,0,0"/>

                        <ActivityIndicator IsRunning="{Binding IsBusy}" 
                                           IsVisible="{Binding IsBusy}"
                                           Color="{StaticResource PrimaryColor}"/>

                    </VerticalStackLayout>
                </Frame>

                <HorizontalStackLayout HorizontalOptions="Center" Spacing="5" Margin="0,10,0,0">
                    <Label Text="Hesabınız yok mu?" TextColor="{StaticResource SecondaryTextColor}"/>

                    <Label x:Name="RegisterLabel"
                           Text="{Binding RegisterButtonText}" 
                           TextColor="{StaticResource PrimaryColor}" 
                           FontAttributes="Bold">
                        <Label.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding GoToRegisterCommand}"/>
                        </Label.GestureRecognizers>
                    </Label>
                </HorizontalStackLayout>

            </VerticalStackLayout>
        </Grid>
    </ScrollView>
</ContentPage>