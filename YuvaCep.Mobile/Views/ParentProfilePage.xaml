<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:YuvaCep.Mobile.ViewModels"
             x:Class="YuvaCep.Mobile.Views.ParentProfilePage"
             x:DataType="vm:ParentProfileViewModel"
             Title="Hesap Bilgilerim"
             BackgroundColor="#F3F4F6"
             Shell.NavBarIsVisible="False">

    <Grid RowDefinitions="Auto, *">

        <Grid Grid.Row="0" HeightRequest="100" BackgroundColor="{Binding ThemeColor}">
            <Grid ColumnDefinitions="Auto, *" Padding="20,40,20,20" VerticalOptions="End">
                <ImageButton Grid.Column="0" 
                             Source="{FontImage Glyph='â¬…', Color=White, Size=25}" 
                             Command="{Binding GoBackCommand}"
                             BackgroundColor="Transparent"
                             HeightRequest="40" WidthRequest="40"
                             HorizontalOptions="Start"/>

                <Label Grid.Column="1" 
                       Text="Hesap Bilgilerim" 
                       TextColor="White" 
                       FontSize="20" 
                       FontAttributes="Bold" 
                       VerticalOptions="Center" 
                       Margin="10,0,0,0"/>
            </Grid>
        </Grid>

        <ScrollView Grid.Row="1" Padding="20">
            <VerticalStackLayout Spacing="20">

                <Frame CornerRadius="15" HasShadow="True" BackgroundColor="White" Padding="20" BorderColor="Transparent">
                    <VerticalStackLayout Spacing="15">
                        <Label Text="ðŸ“± Ä°letiÅŸim Bilgileri" TextColor="{Binding ThemeColor}" FontAttributes="Bold" FontSize="16"/>

                        <BoxView HeightRequest="1" Color="#F3F4F6"/>

                        <VerticalStackLayout Spacing="5">
                            <Label Text="Ad Soyad" TextColor="Gray" FontSize="12"/>
                            <Label Text="{Binding UserName}" TextColor="#374151" FontSize="16" FontAttributes="Bold"/>
                        </VerticalStackLayout>

                        <VerticalStackLayout Spacing="5">
                            <Label Text="Telefon NumarasÄ±" TextColor="Gray" FontSize="12"/>
                            <Frame Padding="10,0" HeightRequest="50" BorderColor="#E5E7EB" CornerRadius="10" BackgroundColor="#F9FAFB" HasShadow="False">
                                <Entry Text="{Binding PhoneNumber}" Keyboard="Telephone" Placeholder="05XX XXX XX XX" FontSize="15" TextColor="#374151"/>
                            </Frame>
                        </VerticalStackLayout>

                        <Button Text="Bilgileri GÃ¼ncelle" 
                                Command="{Binding UpdateContactInfoCommand}"
                                BackgroundColor="{Binding ThemeColor}" 
                                TextColor="White" 
                                CornerRadius="10"
                                FontAttributes="Bold"
                                HeightRequest="45"
                                Margin="0,10,0,0"/>
                    </VerticalStackLayout>
                </Frame>

                <Frame CornerRadius="15" HasShadow="True" BackgroundColor="White" Padding="20" BorderColor="Transparent">
                    <VerticalStackLayout Spacing="15">
                        <Label Text="ðŸ”’ Åžifre DeÄŸiÅŸtir" TextColor="#EF4444" FontAttributes="Bold" FontSize="16"/>

                        <BoxView HeightRequest="1" Color="#F3F4F6"/>
                        <VerticalStackLayout Spacing="5">
                            <Label Text="Mevcut Åžifre" TextColor="Gray" FontSize="12"/>
                            <Frame Padding="10,0" HeightRequest="50" BorderColor="#E5E7EB" CornerRadius="10" BackgroundColor="#F9FAFB" HasShadow="False">
                                <Entry Text="{Binding CurrentPassword}" IsPassword="True" Placeholder="********" TextColor="#374151"/>
                            </Frame>
                        </VerticalStackLayout>
                        <VerticalStackLayout Spacing="5">
                            <Label Text="Yeni Åžifre" TextColor="Gray" FontSize="12"/>
                            <Frame Padding="10,0" HeightRequest="50" BorderColor="#E5E7EB" CornerRadius="10" BackgroundColor="#F9FAFB" HasShadow="False">
                                <Entry Text="{Binding NewPassword}" IsPassword="True" Placeholder="********" TextColor="#374151"/>
                            </Frame>
                        </VerticalStackLayout>
                        <VerticalStackLayout Spacing="5">
                            <Label Text="Yeni Åžifre (Tekrar)" TextColor="Gray" FontSize="12"/>
                            <Frame Padding="10,0" HeightRequest="50" BorderColor="#E5E7EB" CornerRadius="10" BackgroundColor="#F9FAFB" HasShadow="False">
                                <Entry Text="{Binding ConfirmPassword}" IsPassword="True" Placeholder="********" TextColor="#374151"/>
                            </Frame>
                        </VerticalStackLayout>

                        <Button Text="Åžifreyi DeÄŸiÅŸtir" 
                                Command="{Binding ChangePasswordCommand}"
                                BackgroundColor="#EF4444" 
                                TextColor="White" 
                                CornerRadius="10"
                                FontAttributes="Bold"
                                HeightRequest="45"
                                Margin="0,10,0,0"/>
                    </VerticalStackLayout>
                </Frame>

            </VerticalStackLayout>
        </ScrollView>

        <ActivityIndicator Grid.RowSpan="2" 
                           IsRunning="{Binding IsBusy}" 
                           IsVisible="{Binding IsBusy}" 
                           Color="{Binding ThemeColor}"
                           HorizontalOptions="Center" 
                           VerticalOptions="Center"/>
    </Grid>
</ContentPage>