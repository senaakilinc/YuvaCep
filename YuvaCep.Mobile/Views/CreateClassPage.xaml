<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:YuvaCep.Mobile.ViewModels"
             x:Class="YuvaCep.Mobile.Views.CreateClassPage"
             Title="SÄ±nÄ±f OluÅŸtur"
             BackgroundColor="White">

    <ContentPage.BindingContext>
        <vm:CreateClassViewModel />
    </ContentPage.BindingContext>

    <Grid RowDefinitions="Auto, Auto, *, Auto" Padding="20" RowSpacing="15">

        <VerticalStackLayout Grid.Row="0" Spacing="10">
            <Label Text="SÄ±nÄ±f Bilgileri" FontSize="18" FontAttributes="Bold" TextColor="#1F2937"/>

            <Frame BorderColor="Gray" Padding="0" CornerRadius="5">
                <Entry Placeholder="SÄ±nÄ±f Ä°smi (Ã–rn: Papatyalar)" Text="{Binding ClassName}" TextColor="Black" PlaceholderColor="Gray" BackgroundColor="#F3F4F6"/>
            </Frame>
            <Frame BorderColor="Gray" Padding="0" CornerRadius="5">
                <Entry Placeholder="YaÅŸ Grubu (Ã–rn: 4-5 YaÅŸ)" Text="{Binding AgeGroup}" TextColor="Black" PlaceholderColor="Gray" BackgroundColor="#F3F4F6"/>
            </Frame>
        </VerticalStackLayout>

        <VerticalStackLayout Grid.Row="1" Spacing="10">
            <BoxView HeightRequest="1" Color="LightGray" />
            <Label Text="Ã–ÄŸrenci Ekle" FontSize="18" FontAttributes="Bold" TextColor="#1F2937"/>

            <Grid ColumnDefinitions="*, *" ColumnSpacing="10" RowDefinitions="Auto, Auto">
                <Frame Grid.Column="0" BorderColor="Gray" Padding="0" CornerRadius="5">
                    <Entry Placeholder="Ã–ÄŸrenci AdÄ±" Text="{Binding NewStudentName}" TextColor="Black" PlaceholderColor="Gray" BackgroundColor="#F3F4F6"/>
                </Frame>
                <Frame Grid.Column="1" BorderColor="Gray" Padding="0" CornerRadius="5">
                    <Entry Placeholder="Veli AdÄ± SoyadÄ±" Text="{Binding NewParentName}" TextColor="Black" PlaceholderColor="Gray" BackgroundColor="#F3F4F6"/>
                </Frame>
                <Frame Grid.Row="1" Grid.Column="0" BorderColor="Gray" Padding="0" CornerRadius="5" Margin="0,10,0,0">
                    <Entry Placeholder="Veli TC No" Text="{Binding NewParentTC}" Keyboard="Numeric" TextColor="Black" PlaceholderColor="Gray" BackgroundColor="#F3F4F6"/>
                </Frame>
                <Button Grid.Row="1" Grid.Column="1" Text="+ Ekle" Command="{Binding AddStudentCommand}" Margin="0,10,0,0" BackgroundColor="#10B981" TextColor="White" FontAttributes="Bold"/>
            </Grid>
        </VerticalStackLayout>

        <CollectionView Grid.Row="2" ItemsSource="{Binding Students}">
            <CollectionView.Header>
                <Label Text="Eklenen Ã–ÄŸrenciler:" FontAttributes="Italic" TextColor="Gray" Margin="0,10,0,5"/>
            </CollectionView.Header>
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Margin="0,5" Padding="10" BorderColor="LightGray" BackgroundColor="White">
                        <Grid ColumnDefinitions="Auto, *, Auto">

                            <Label Grid.Column="0" Text="ðŸ‘¤" VerticalOptions="Center" Margin="0,0,10,0"/>

                            <VerticalStackLayout Grid.Column="1" VerticalOptions="Center">
                                <Label Text="{Binding Name}" FontAttributes="Bold" TextColor="Black"/>
                                <Label Text="{Binding ParentName}" FontSize="12" TextColor="Gray"/>
                            </VerticalStackLayout>

                            <Frame Grid.Column="2" 
                       BackgroundColor="#FFF7ED" 
                       BorderColor="#F97316" 
                       Padding="10,5" 
                       CornerRadius="5"
                       VerticalOptions="Center">
                                <VerticalStackLayout>
                                    <Label Text="Referans Kodu" FontSize="10" TextColor="#F97316" HorizontalOptions="Center"/>
                                    <Label Text="{Binding ReferenceCode}" 
                               FontSize="16" 
                               FontAttributes="Bold" 
                               TextColor="#C2410C" 
                               HorizontalOptions="Center"/>
                                </VerticalStackLayout>
                            </Frame>

                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <Button Grid.Row="3" Text="SINIFI OLUÅžTUR VE BÄ°TÄ°R" 
                Command="{Binding SaveClassCommand}" 
                BackgroundColor="#2563EB" 
                TextColor="White" 
                FontAttributes="Bold" 
                HeightRequest="50" 
                CornerRadius="10"/>

    </Grid>
</ContentPage>