<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:YuvaCep.Mobile.ViewModels"
             x:Class="YuvaCep.Mobile.Views.DailyReportPage"
             Title="Günlük Rapor Yaz"
             BackgroundColor="White">
    <ContentPage.BindingContext>
        <vm:DailyReportViewModel />
    </ContentPage.BindingContext>

    <ScrollView>
        <VerticalStackLayout Spacing="20" Padding="20">

            <Label Text="Öğrenci Seçiniz" FontAttributes="Bold" TextColor="#1F2937"/>
            <Frame BorderColor="Gray" Padding="0" CornerRadius="10" BackgroundColor="#F3F4F6">
                <Picker Title="Listeden Seçiniz"
                        ItemsSource="{Binding MyStudents}"
                        ItemDisplayBinding="{Binding Name}"
                        SelectedItem="{Binding SelectedStudent}"
                        TextColor="Black"
                        TitleColor="Gray"/>
            </Frame>

            <Label Text="Günü Nasıl Geçti?" FontAttributes="Bold" TextColor="#1F2937" Margin="0,10,0,0"/>

            <Frame BackgroundColor="#EFF6FF" BorderColor="#2563EB" Padding="10" HorizontalOptions="Center">
                <Label Text="{Binding CurrentMoodText}" FontSize="18" FontAttributes="Bold" TextColor="#2563EB" HorizontalOptions="Center"/>
            </Frame>

            <CollectionView ItemsSource="{Binding MoodOptions}" 
                            HeightRequest="70" 
                            SelectionMode="Single"  
                            SelectedItem="{Binding SelectedMood}">

                <CollectionView.ItemsLayout>
                    <GridItemsLayout Orientation="Vertical" Span="5" HorizontalItemSpacing="5"/>
                </CollectionView.ItemsLayout>

                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Padding="0" 
                               CornerRadius="10"
                               HasShadow="False"
                               BorderColor="{Binding BorderColor}" 
                               BackgroundColor="{Binding BackgroundColor}"
                               HeightRequest="60">

                            <Label Text="{Binding Emoji}" 
                                   FontSize="30" 
                                   HorizontalOptions="Center" 
                                   VerticalOptions="Center"/>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <Label Text="Beslenme / Yemek" FontAttributes="Bold" TextColor="#1F2937" Margin="0,10,0,0"/>
            <Frame BorderColor="Gray" Padding="10" CornerRadius="10" BackgroundColor="#F3F4F6">
                <Editor Placeholder="Bugün ne yedi?" Text="{Binding NutritionInfo}" TextColor="Black" PlaceholderColor="Gray" HeightRequest="80" AutoSize="TextChanges"/>
            </Frame>

            <Label Text="Öğretmen Notu" FontAttributes="Bold" TextColor="#1F2937" Margin="0,10,0,0"/>
            <Frame BorderColor="Gray" Padding="10" CornerRadius="10" BackgroundColor="#F3F4F6">
                <Editor Placeholder="Veliye not..." Text="{Binding TeacherNote}" TextColor="Black" PlaceholderColor="Gray" HeightRequest="80" AutoSize="TextChanges"/>
            </Frame>

            <Button Text="RAPORU KAYDET" Command="{Binding SaveReportCommand}" BackgroundColor="#2563EB" TextColor="White" FontAttributes="Bold" HeightRequest="50" CornerRadius="10" Margin="0,20,0,30"/>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>