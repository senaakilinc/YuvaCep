<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:YuvaCep.Mobile.ViewModels"
             x:Class="YuvaCep.Mobile.Views.DailyReportPage"
             x:DataType="viewModels:DailyReportViewModel"
             Title="GÃ¼nlÃ¼k Rapor"
             Shell.NavBarIsVisible="False"
             BackgroundColor="{StaticResource PageBackgroundColor}">

    <Grid RowDefinitions="Auto, *">

        <Grid Grid.Row="0" HeightRequest="260">
            <BoxView Color="#FF9F1C" 
                     CornerRadius="0,0,60,60"
                     VerticalOptions="Fill"/>

            <Grid RowDefinitions="Auto, Auto" Padding="20,50,20,0" VerticalOptions="Start">

                <Grid Grid.Row="0" ColumnDefinitions="Auto, *">
                    <Frame Padding="0" HeightRequest="45" WidthRequest="45" CornerRadius="12" 
                           BackgroundColor="#33FFFFFF" HasShadow="False" BorderColor="Transparent"
                           HorizontalOptions="Start">
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding GoBackCommand}"/>
                        </Frame.GestureRecognizers>
                        <Label Text="&#x2190;" TextColor="White" FontSize="26" HorizontalOptions="Center" VerticalOptions="Center"/>
                    </Frame>

                    <Label Grid.Column="1" Text="GÃ¼nlÃ¼k Rapor" TextColor="White" FontAttributes="Bold" FontSize="22" 
                           HorizontalOptions="Center" VerticalOptions="Center" Margin="-45,0,0,0"/>
                </Grid>

                <VerticalStackLayout Grid.Row="1" Spacing="5" HorizontalOptions="Center" Margin="0,20,0,0">
                    <Frame Padding="15,8" BackgroundColor="White" CornerRadius="20" HasShadow="True" HorizontalOptions="Center">
                        <HorizontalStackLayout Spacing="10" VerticalOptions="Center">
                            <Label Text="ðŸ“…" FontSize="18" VerticalOptions="Center"/>
                            <DatePicker Date="{Binding SelectedDate}" 
                                        Format="d MMMM yyyy, dddd"
                                        TextColor="{StaticResource ParentColor}"
                                        FontAttributes="Bold"
                                        FontSize="14"
                                        MinimumDate="01/01/2024"/>
                        </HorizontalStackLayout>
                    </Frame>
                    <Label Text="Tarihini gÃ¶rÃ¼ntÃ¼lÃ¼yorsunuz" TextColor="#FFEDD5" FontSize="12" HorizontalOptions="Center" FontAttributes="Italic"/>
                </VerticalStackLayout>
            </Grid>
        </Grid>

        <ScrollView Grid.Row="1" Margin="20,-40,20,0" Padding="0,0,0,30" VerticalScrollBarVisibility="Never">
            <VerticalStackLayout Spacing="15">

                <ActivityIndicator IsRunning="{Binding IsBusy}" 
                                   IsVisible="{Binding IsBusy}" 
                                   Color="{StaticResource ParentColor}"
                                   HorizontalOptions="Center"/>

                <VerticalStackLayout IsVisible="{Binding IsReportEmpty}" Spacing="15" VerticalOptions="Center" Margin="0,50,0,0">
                    <Label Text="ðŸ¤·â€â™‚ï¸" FontSize="80" HorizontalOptions="Center"/>
                    <Label Text="Bu tarihte rapor girilmemiÅŸ." 
                           TextColor="{StaticResource TextSecondary}" FontSize="16" HorizontalOptions="Center" HorizontalTextAlignment="Center"/>
                    <Label Text="BaÅŸka bir tarih seÃ§meyi deneyin." 
                           TextColor="{StaticResource ParentColor}" FontSize="12" HorizontalOptions="Center"/>
                </VerticalStackLayout>

                <VerticalStackLayout IsVisible="{Binding HasReport}" Spacing="15">

                    <Frame Style="{StaticResource CardStyle}">
                        <Grid ColumnDefinitions="Auto, *" ColumnSpacing="15">
                            <Frame Grid.Column="0" HeightRequest="60" WidthRequest="60" CornerRadius="30" Padding="0" 
                                   BackgroundColor="#FFEDD5" BorderColor="Transparent" HorizontalOptions="Center" VerticalOptions="Center">
                                <Label Text="ðŸ‘¶" FontSize="30" HorizontalOptions="Center" VerticalOptions="Center"/>
                            </Frame>

                            <VerticalStackLayout Grid.Column="1" VerticalOptions="Center" Spacing="2">
                                <Label Text="Ã–ÄŸrenci" TextColor="{StaticResource TextSecondary}" FontSize="10" FontAttributes="Bold"/>
                                <Label Text="{Binding StudentName}" TextColor="{StaticResource TextPrimary}" FontSize="18" FontAttributes="Bold"/>
                                <Label Text="{Binding ClassName}" TextColor="{StaticResource ParentColor}" FontSize="12"/>
                            </VerticalStackLayout>
                        </Grid>
                    </Frame>

                    <Frame Style="{StaticResource CardStyle}">
                        <Grid ColumnDefinitions="Auto, *" ColumnSpacing="15">
                            <Frame BackgroundColor="#F3E8FF" CornerRadius="25" HeightRequest="50" WidthRequest="50" Padding="0" HasShadow="False" HorizontalOptions="Center" VerticalOptions="Center">
                                <Label Text="{Binding MoodEmoji}" FontSize="28" HorizontalOptions="Center" VerticalOptions="Center"/>
                            </Frame>
                            <VerticalStackLayout Grid.Column="1" VerticalOptions="Center" Spacing="2">
                                <Label Text="GÃœNÃœN MODU" TextColor="{StaticResource TextSecondary}" FontSize="10" FontAttributes="Bold"/>
                                <Label Text="{Binding MoodText}" TextColor="{Binding MoodColor}" FontSize="18" FontAttributes="Bold"/>
                                <Label Text="{Binding MoodNoteDisplay}" TextColor="{Binding MoodNoteColor}" FontSize="13" FontAttributes="Italic" LineBreakMode="WordWrap"/>
                            </VerticalStackLayout>
                        </Grid>
                    </Frame>

                    <Frame Style="{StaticResource CardStyle}">
                        <VerticalStackLayout Spacing="10">
                            <HorizontalStackLayout Spacing="10">
                                <Label Text="ðŸ½ï¸" VerticalOptions="Center"/>
                                <Label Text="Yemek Durumu" TextColor="{StaticResource ParentColor}" FontAttributes="Bold" VerticalOptions="Center"/>
                            </HorizontalStackLayout>
                            <BoxView HeightRequest="1" Color="{StaticResource Gray200}"/>

                            <Grid RowDefinitions="Auto, Auto" ColumnDefinitions="*, Auto" RowSpacing="10">
                                <Label Grid.Row="0" Grid.Column="0" Text="KahvaltÄ±" TextColor="{StaticResource TextPrimary}"/>
                                <Label Grid.Row="0" Grid.Column="1" Text="{Binding BreakfastText}" FontAttributes="Bold" TextColor="{StaticResource TextPrimary}"/>

                                <Label Grid.Row="1" Grid.Column="0" Text="Ã–ÄŸle YemeÄŸi" TextColor="{StaticResource TextPrimary}"/>
                                <Label Grid.Row="1" Grid.Column="1" Text="{Binding LunchText}" FontAttributes="Bold" TextColor="{StaticResource TextPrimary}"/>
                            </Grid>

                            <Frame BackgroundColor="#F9FAFB" Padding="10" CornerRadius="8" HasShadow="False" BorderColor="Transparent" IsVisible="{Binding FoodNoteDisplay, Converter={StaticResource IsNotNullConverter}}">
                                <Label Text="{Binding FoodNoteDisplay}" TextColor="{Binding FoodNoteColor}" FontSize="13" FontAttributes="Italic"/>
                            </Frame>
                        </VerticalStackLayout>
                    </Frame>

                    <Frame Style="{StaticResource CardStyle}">
                        <VerticalStackLayout Spacing="10">
                            <HorizontalStackLayout Spacing="10">
                                <Label Text="ðŸ’¤" VerticalOptions="Center"/>
                                <Label Text="Uyku &amp; Etkinlik" TextColor="{StaticResource ParentColor}" FontAttributes="Bold" VerticalOptions="Center"/>
                            </HorizontalStackLayout>
                            <BoxView HeightRequest="1" Color="{StaticResource Gray200}"/>

                            <Grid RowDefinitions="Auto, Auto" ColumnDefinitions="*, Auto" RowSpacing="10">
                                <Label Grid.Row="0" Grid.Column="0" Text="Uyku" TextColor="{StaticResource TextPrimary}"/>
                                <Label Grid.Row="0" Grid.Column="1" Text="{Binding SleepText}" FontAttributes="Bold" TextColor="{StaticResource TextPrimary}"/>

                                <Label Grid.Row="1" Grid.Column="0" Text="Etkinlik" TextColor="{StaticResource TextPrimary}"/>
                                <Label Grid.Row="1" Grid.Column="1" Text="{Binding ActivityText}" FontAttributes="Bold" TextColor="{StaticResource TextPrimary}"/>
                            </Grid>

                            <Frame BackgroundColor="#F9FAFB" Padding="10" CornerRadius="8" HasShadow="False" BorderColor="Transparent" IsVisible="{Binding ActivityNoteDisplay, Converter={StaticResource IsNotNullConverter}}">
                                <Label Text="{Binding ActivityNoteDisplay}" TextColor="{Binding ActivityNoteColor}" FontSize="13" FontAttributes="Italic"/>
                            </Frame>
                        </VerticalStackLayout>
                    </Frame>

                    <Frame Style="{StaticResource CardStyle}" BackgroundColor="#FFF7ED" BorderColor="#FFEDD5">
                        <VerticalStackLayout Spacing="8">
                            <HorizontalStackLayout Spacing="10">
                                <Label Text="ðŸ“" VerticalOptions="Center"/>
                                <Label Text="Ã–ÄŸretmenin Notu" TextColor="{StaticResource ParentColor}" FontAttributes="Bold" VerticalOptions="Center"/>
                            </HorizontalStackLayout>
                            <Label Text="{Binding TeacherNoteDisplay}" TextColor="{Binding TeacherNoteColor}" FontSize="14" LineBreakMode="WordWrap"/>
                        </VerticalStackLayout>
                    </Frame>

                </VerticalStackLayout>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>